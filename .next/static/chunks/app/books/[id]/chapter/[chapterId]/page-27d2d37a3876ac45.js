(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9732],{7280:(e,r,t)=>{Promise.resolve().then(t.bind(t,9233))},9233:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(5155),s=t(2115),l=t(2619),n=t.n(l);function o(e){var r;let{bookId:t,chapterId:l}=e,[o,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[m,x]=(0,s.useState)([]),[h,u]=(0,s.useState)(!0),[g,p]=(0,s.useState)(null),[b,f]=(0,s.useState)({}),[y,j]=(0,s.useState)(""),[k,N]=(0,s.useState)(""),[w,v]=(0,s.useState)(null),[S,E]=(0,s.useState)(!1),[C,B]=(0,s.useState)(null),[L,I]=(0,s.useState)(""),[z,Y]=(0,s.useState)(""),[T,P]=(0,s.useState)([]),[A,O]=(0,s.useState)(!1),[K,_]=(0,s.useState)(!1),[D,H]=(0,s.useState)(""),[J,F]=(0,s.useState)(!1),[G,M]=(0,s.useState)(!1),[U,R]=(0,s.useState)(null),[q,Q]=(0,s.useState)(""),[V,W]=(0,s.useState)(null),[X,Z]=(0,s.useState)(""),[$,ee]=(0,s.useState)({total:0,isLiked:!1}),[er,et]=(0,s.useState)({}),ea=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("user_id");e||(e="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("user_id",e)),H(e),es(),el(),en()},[t,l]),(0,s.useEffect)(()=>{D&&o&&(eo(),ei())},[D,o]);let es=async()=>{try{u(!0),p(null),console.log("Loading chapter data for:",{bookId:t,chapterId:l});let e=await fetch("/api/books",{headers:{}});if(!e.ok)throw console.error("Books API error:",e.status,e.statusText),Error("Kitap bilgileri y\xfcklenemedi");let r=await e.json();if(console.log("Books API response:",r),!r.success)throw Error(r.error||"Kitap bilgileri alınamadı");let a=(r.data||[]).find(e=>e.id.toString()===t.toString());if(!a)throw Error("Kitap bulunamadı");d(a),console.log("Book loaded:",a.title);try{let e=await fetch("/api/chapters?bookId=".concat(t),{headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Chapters API error:",e.status,e.statusText),Error("B\xf6l\xfcmler y\xfcklenemedi");let r=await e.json();if(console.log("Chapters API response:",r),!r.success)throw Error(r.error||"B\xf6l\xfcmler alınamadı");let a=r.data||[];console.log("Chapters loaded:",a.length),x(a);let s=await fetch("/api/chapters/".concat(l),{headers:{"Content-Type":"application/json"}});if(!s.ok)throw console.error("Chapter API error:",s.status,s.statusText),Error("B\xf6l\xfcm y\xfcklenemedi");let n=await s.json();if(console.log("Chapter API response:",n),!n.success||!n.data)throw console.error("Chapter not found. Available chapters:",a.map(e=>({id:e.id,title:e.title}))),Error("B\xf6l\xfcm bulunamadı");let o=n.data;i(o),console.log("Chapter loaded:",o.title)}catch(e){throw console.error("Chapters loading error:",e),Error("B\xf6l\xfcmler y\xfcklenirken hata oluştu")}}catch(e){console.error("Error loading chapter data:",e),p(e instanceof Error?e.message:"B\xf6l\xfcm y\xfcklenirken hata oluştu")}finally{u(!1)}},el=async()=>{try{let r=await fetch("/api/books",{headers:{}});if(r.ok){let t=await r.json();if(t.success){var e;P(t.data||[]),console.log("Chapter comments loaded:",(null==(e=t.data)?void 0:e.length)||0)}else console.error("Chapter comments error:",t.error),P([])}else console.error("Chapter comments API error:",r.status,r.statusText),P([])}catch(e){console.error("Comments loading error:",e),P([])}},en=async()=>{try{console.log("Loading line comments for chapter:",l);let e=await fetch("/api/books",{headers:{}});if(e.ok){let r=await e.json();r.success?(console.log("Line comments loaded:",r.total||0),f(r.data||{})):(console.error("Line comments load error:",r.error),f({}))}else console.error("Line comments API error:",e.status,e.statusText),f({})}catch(e){console.error("Line comments loading error:",e),f({})}},eo=async()=>{try{let e=await fetch("/api/books",{headers:{}});if(e.ok){let r=await e.json();r.success&&ee({total:r.data.totalLikes||0,isLiked:r.data.isLiked||!1})}}catch(e){console.error("Error loading chapter likes:",e)}},ei=async()=>{if(null==o?void 0:o.content)try{let e=o.content.split("\n").filter(e=>e.trim()),r={};await Promise.all(e.map(async(e,t)=>{try{let e=await fetch("/api/books",{headers:{}});if(e.ok){let a=await e.json();a.success&&(r[t]={total:a.data.totalLikes||0,isLiked:a.data.isLiked||!1})}}catch(e){console.error("Error loading likes for line ".concat(t,":"),e),r[t]={total:0,isLiked:!1}}})),et(r)}catch(e){console.error("Error loading line likes:",e)}},ec=async()=>{if(!D)return;let e=$.isLiked,r=$.total;ee({total:e?r-1:r+1,isLiked:!e});try{let r=e?void 0:JSON.stringify({type:"chapter",targetId:l,bookId:t,userId:D}),a=await fetch("/api/books",{method:e?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:r});if(!a.ok)throw Error("Beğeni işlemi başarısız");let s=await a.json();if(!s.success)throw Error(s.error||"Beğeni işlemi başarısız");await eo()}catch(t){console.error("Chapter like işlemi hatası:",t),ee({total:r,isLiked:e}),alert("Beğeni işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}},ed=async(e,r,a)=>{if(a.preventDefault(),a.stopPropagation(),!D)return;let s=er[e]||{total:0,isLiked:!1},n=s.isLiked,o=s.total;et(r=>({...r,[e]:{total:n?o-1:o+1,isLiked:!n}}));try{let a=n?void 0:JSON.stringify({type:"line",targetId:l,bookId:t,lineNumber:e,lineText:r.substring(0,100),userId:D}),s=await fetch("/api/books",{method:n?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:a});if(!s.ok)throw Error("Beğeni işlemi başarısız");let o=await s.json();if(!o.success)throw Error(o.error||"Beğeni işlemi başarısız");await ei()}catch(r){console.error("Line like işlemi hatası:",r),et(r=>({...r,[e]:{total:o,isLiked:n}})),alert("Beğeni işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}},em=e=>{w===e&&S?(E(!1),v(null),B(null)):(B(e),v(e),E(!0))},ex=async()=>{if(y.trim()&&k.trim()&&null!==w){_(!0);try{let e=(o.content?o.content.split("\n").filter(e=>e.trim()):[])[w]||"";console.log("Adding line comment:",{chapterId:l,bookId:t,lineNumber:w,lineText:e.substring(0,100),name:k.trim(),comment:y.trim(),userId:D});let r=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapterId:l,bookId:t,lineNumber:w,lineText:e,name:k.trim(),comment:y.trim(),rating:5,userId:D})});if(r.ok){let e=await r.json();if(e.success)console.log("Line comment added successfully:",e.data),f(r=>{let t={...r};return t[w]||(t[w]=[]),t[w]=[e.data,...t[w]],t}),j(""),N("");else throw Error(e.error||"Satır yorumu eklenirken hata oluştu")}else{let e=await r.text();throw Error("API hatası: ".concat(r.status," - ").concat(e))}}catch(e){console.error("Line comment add error:",e),alert("Satır yorumu eklenirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}finally{_(!1)}}},eh=async()=>{if(L.trim()&&z.trim()){O(!0);try{console.log("Adding chapter comment:",{bookId:t,chapterId:l,name:z.trim(),comment:L.trim(),userId:D});let e=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:t,chapterId:l,type:"chapter",name:z.trim(),comment:L.trim(),rating:5,userId:D})});if(e.ok){let r=await e.json();if(r.success)console.log("Chapter comment added successfully:",r.data),P(e=>[r.data,...e]),I(""),Y("");else throw Error(r.error||"B\xf6l\xfcm yorumu eklenirken hata oluştu")}else{let r=await e.text();throw Error("API hatası: ".concat(e.status," - ").concat(r))}}catch(e){console.error("Chapter comment add error:",e),alert("B\xf6l\xfcm yorumu eklenirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}finally{O(!1)}}},eu=async(e,r)=>{if(window.confirm("Bu satır yorumunu silmek istediğinizden emin misiniz?"))try{let t=await fetch("/api/books",{method:"DELETE",headers:{}});if(t.ok){let a=await t.json();if(a.success)f(t=>{let a={...t};return a[r]&&(a[r]=a[r].filter(r=>r.id!==e),0===a[r].length&&delete a[r]),a}),console.log("Line comment deleted successfully");else throw Error(a.error||"Satır yorumu silinirken hata oluştu")}else throw Error("API hatası: "+t.status)}catch(e){console.error("Line comment delete error:",e),alert("Satır yorumu silinirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}},eg=async(e,r,t)=>{if(r.trim())try{let a=await fetch("/api/books",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:r.trim()})});if(a.ok){let s=await a.json();if(s.success)f(a=>{let s={...a};return s[t]&&(s[t]=s[t].map(t=>t.id===e?{...t,comment:r.trim()}:t)),s}),W(null),Z("");else throw Error(s.error||"Satır yorumu g\xfcncellenirken hata oluştu")}else throw Error("API hatası: "+a.status)}catch(e){console.error("Line comment edit error:",e),alert("Satır yorumu g\xfcncellenirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}},ep=async(e,r)=>{if(r.trim())try{let t=await fetch("/api/books",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:r.trim()})});if(t.ok){let a=await t.json();if(a.success)P(t=>t.map(t=>t.id===e?{...t,comment:r.trim()}:t)),R(null),Q("");else throw Error(a.error||"Yorum g\xfcncellenirken hata oluştu")}else throw Error("API hatası: "+t.status)}catch(e){console.error("Comment edit error:",e),alert("Yorum g\xfcncellenirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}},eb=async e=>{if(window.confirm("Bu yorumu silmek istediğinizden emin misiniz?"))try{let r=await fetch("/api/books",{method:"DELETE",headers:{}});if(r.ok){let t=await r.json();if(t.success)P(r=>r.filter(r=>r.id!==e));else throw Error(t.error||"Yorum silinirken hata oluştu")}else throw Error("API hatası: "+r.status)}catch(e){console.error("Comment delete error:",e),alert("Yorum silinirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}},ef=()=>{W(null),Z("")},ey=()=>{R(null),Q("")},ej=e=>J?e.filter(e=>e.userId===D):e,ek=e=>{let r=b[e]||[];return G?r.filter(e=>e.userId===D):r},eN=()=>m.findIndex(e=>e.id.toString()===l.toString());if(h)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 dark:border-orange-400 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"B\xf6l\xfcm y\xfckleniyor..."})]})});if(g)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-6 py-4 rounded-lg mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Hata"}),(0,a.jsx)("p",{children:g})]}),(0,a.jsx)(n(),{href:"/books/".concat(t),className:"text-orange-600 hover:underline",children:"Kitaba geri d\xf6n"})]})});if(!o||!c)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"B\xf6l\xfcm bulunamadı"}),(0,a.jsx)(n(),{href:"/books/".concat(t),className:"text-orange-600 dark:text-orange-400 hover:underline",children:"Kitaba geri d\xf6n"})]})});let ew=o.content?o.content.split("\n").filter(e=>e.trim()):[],ev=(()=>{let e=eN();return e>0?m[e-1]:null})(),eS=(()=>{let e=eN();return e>=0&&e<m.length-1?m[e+1]:null})();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)("div",{className:"pt-20 pb-16",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(n(),{href:"/kitaplar/".concat(t),className:"inline-flex items-center text-orange-600 hover:text-orange-700 cursor-pointer",children:[(0,a.jsx)("i",{className:"ri-arrow-left-line mr-2"}),c.title," - Kitaba Geri D\xf6n"]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden mb-8",children:[(0,a.jsxs)("div",{className:"bg-orange-600 text-white p-6 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:o.title}),(0,a.jsx)("p",{className:"text-orange-100 mt-2",children:c.title}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("button",{onClick:ec,className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full font-medium transition-all duration-200 ".concat($.isLiked?"bg-red-500 text-white hover:bg-red-600":"bg-white/20 text-white hover:bg-white/30"),children:[(0,a.jsx)("i",{className:"".concat($.isLiked?"ri-heart-fill":"ri-heart-line")}),(0,a.jsx)("span",{children:$.isLiked?"Beğenildi":"Beğen"}),(0,a.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full text-xs font-bold",children:$.total})]})})]}),(0,a.jsx)("div",{className:"p-8",ref:ea,children:ew.length>0?(0,a.jsx)("div",{className:"prose prose-lg max-w-none",children:ew.map((e,r)=>{let t=(e=>{let r=b[e]||[];return G?r.filter(e=>e.userId===D).length:r.length})(r),s=w===r&&S,l=er[r]||{total:0,isLiked:!1};return(0,a.jsx)("div",{className:"relative mb-6 group",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("div",{className:"flex-1 pr-4",children:(0,a.jsx)("p",{className:"leading-relaxed text-gray-800 cursor-pointer p-3 rounded transition-colors ".concat(s?"bg-orange-100 border-l-4 border-orange-500":"hover:bg-orange-50"),onClick:()=>em(r),children:e.trim()})}),(0,a.jsxs)("div",{className:"flex-shrink-0 ml-3 mt-3 flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:t=>ed(r,e,t),className:"flex items-center space-x-1 px-2 py-1 rounded-full transition-all duration-200 ".concat(l.isLiked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600"," ").concat(l.total>0?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[(0,a.jsx)("i",{className:"".concat(l.isLiked?"ri-heart-fill":"ri-heart-line"," text-xs")}),(0,a.jsx)("span",{className:"text-xs font-medium",children:l.total||""})]}),t>0&&(0,a.jsx)("div",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-md hover:bg-orange-600 transition-colors cursor-pointer",onClick:()=>em(r),children:t})]})]})},r)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("i",{className:"ri-file-text-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-500 mb-2",children:"İ\xe7erik Bulunamadı"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Bu b\xf6l\xfcm\xfcn i\xe7eriği hen\xfcz eklenmemiş."})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-800",children:["Bu B\xf6l\xfcm Hakkında Yorumlar (",ej(T).length,")"]}),(0,a.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Sadece Benim Yorumlarım"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",checked:J,onChange:e=>F(e.target.checked),className:"sr-only"}),(0,a.jsx)("div",{className:"w-12 h-6 rounded-full transition-colors ".concat(J?"bg-orange-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ".concat(J?"translate-x-6":"translate-x-1"," mt-0.5")})})]})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 rounded-xl p-6 mb-8",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"B\xf6l\xfcm Hakkında Yorumunuzu Paylaşın"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"İsminiz",value:z,onChange:e=>Y(e.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:border-orange-500 text-sm",disabled:A}),(0,a.jsx)("textarea",{placeholder:"Bu b\xf6l\xfcm hakkında d\xfcş\xfcncelerinizi paylaşın...",value:L,onChange:e=>I(e.target.value),maxLength:500,className:"w-full h-32 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:border-orange-500 text-sm",disabled:A}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[L.length,"/500"]}),(0,a.jsx)("button",{onClick:eh,disabled:!L.trim()||!z.trim()||A,className:"px-6 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap",children:A?"Kaydediliyor...":"Yorum Yap"})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:ej(T).map((e,r)=>(0,a.jsx)("div",{className:"border-b border-gray-100 pb-6 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-orange-600 font-semibold text-lg",children:e.name[0]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),e.userId===D&&(0,a.jsx)("span",{className:"bg-orange-100 text-orange-600 text-xs px-2 py-1 rounded-full",children:"Sen"}),(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((r,t)=>(0,a.jsx)("i",{className:"ri-star-".concat(t<e.rating?"fill":"line"," text-sm ").concat(t<e.rating?"text-yellow-400":"text-gray-300")},t))}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.time})]}),e.userId===D&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{R(e),Q(e.comment)},className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu D\xfczenle",children:(0,a.jsx)("i",{className:"ri-edit-line text-sm"})}),(0,a.jsx)("button",{onClick:()=>eb(e.id),className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu Sil",children:(0,a.jsx)("i",{className:"ri-delete-bin-line text-sm"})})]})]}),(null==U?void 0:U.id)===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:q,onChange:e=>Q(e.target.value),maxLength:500,className:" w-full p-3 border border-gray-200 rounded-lg resize-none focus-outline-none focus:border-orange-500 text-sm",rows:3}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[q.length,"/500"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:ey,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-full hover:bg-gray-50 transition-colors cursor-pointer text-sm whitespace-nowrap",children:"İptal"}),(0,a.jsx)("button",{onClick:()=>ep(e.id,q),disabled:!q.trim()||q.trim()===e.comment,className:"px-4 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap",children:"Kaydet"})]})]})]}):(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:e.comment})]})]})},e.id||r))}),0===ej(T).length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("i",{className:"ri-chat-3-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-500 mb-2",children:J?"Hen\xfcz Yorum Yapmadınız":"Hen\xfcz Yorum Yok"}),(0,a.jsx)("p",{className:"text-gray-400",children:J?"Bu b\xf6l\xfcm hakkında yorum yaparak başlayın!":"Bu b\xf6l\xfcm hakkında ilk yorumu siz yapın!"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[ev?(0,a.jsxs)(n(),{href:"/books/".concat(t,"/chapter/").concat((null==ev?void 0:ev.slug)||(null==ev?void 0:ev.id)),className:"flex items-center px-6 py-3 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer whitespace-nowrap shadow-md",children:[(0,a.jsx)("i",{className:"ri-arrow-left-line mr-2"}),"\xd6nceki B\xf6l\xfcm"]}):(0,a.jsxs)(n(),{href:"/books/".concat(t),className:"flex items-center px-6 py-3 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer whitespace-nowrap shadow-md",children:[(0,a.jsx)("i",{className:"ri-book-line mr-2"}),"B\xf6l\xfcmler"]}),(0,a.jsx)("div",{className:"text-center px-4",children:(0,a.jsxs)("p",{className:"text-xs text-gray-400 font-medium",children:[m.length," b\xf6l\xfcmden ",eN()+1,"."]})}),eS?(0,a.jsxs)(n(),{href:"/books/".concat(t,"/chapter/").concat((null==eS?void 0:eS.slug)||(null==eS?void 0:eS.id)),className:"flex items-center px-6 py-3 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer whitespace-nowrap shadow-md",children:["Sonraki B\xf6l\xfcm",(0,a.jsx)("i",{className:"ri-arrow-right-line ml-2"})]}):(0,a.jsxs)("div",{className:"flex items-center px-6 py-3 bg-gray-100 text-gray-400 rounded-full cursor-not-allowed whitespace-nowrap",children:["Son B\xf6l\xfcm",(0,a.jsx)("i",{className:"ri-check-line ml-2"})]})]})]})}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>E(!1)}),(0,a.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:null!==C?"".concat(C+1,". Satır Yorumları"):"Yorumlar"}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 cursor-pointer",children:(0,a.jsx)("i",{className:"ri-close-line text-xl"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Sadece Benim Yorumlarım"}),(0,a.jsx)("label",{className:"flex items-center cursor-pointer",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"checkbox",checked:G,onChange:e=>M(e.target.checked),className:"sr-only"}),(0,a.jsx)("div",{className:"w-10 h-5 rounded-full transition-colors ".concat(G?"bg-orange-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-4 h-4 bg-white rounded-full shadow-md transform transition-transform ".concat(G?"translate-x-5":"translate-x-0.5"," mt-0.5")})})]})})]})]}),(0,a.jsx)("div",{className:"p-6",children:null!==C&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Se\xe7ilen satır:"}),(0,a.jsx)("div",{className:"bg-white border border-orange-200 rounded-xl p-4 shadow-sm",children:(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed text-sm",children:null==(r=ew[C])?void 0:r.trim()})})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Bu Satır Hakkında Yorum Yap"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"İsminiz",value:k,onChange:e=>N(e.target.value),className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:border-orange-500 text-sm",disabled:K}),(0,a.jsx)("textarea",{value:y,onChange:e=>j(e.target.value),placeholder:"Bu satır hakkında d\xfcş\xfcncelerinizi paylaşın...",maxLength:500,className:"w-full h-32 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:border-orange-500 text-sm",disabled:K}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[y.length,"/500"]}),(0,a.jsx)("button",{onClick:ex,disabled:!y.trim()||!k.trim()||K,className:"px-4 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap flex items-center",children:K?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Kaydediliyor..."]}):"G\xf6nder"})]})]})]}),ek(C).length>0&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-800 mb-4",children:[G?"Benim Yorumlarım":"Mevcut Yorumlar"," (",ek(C).length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:ek(C).map((e,r)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-orange-600 font-semibold text-sm",children:e.name[0]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-800 text-sm",children:e.name}),e.userId===D&&(0,a.jsx)("span",{className:"bg-orange-100 text-orange-600 text-xs px-1 py-0.5 rounded-full",children:"Sen"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.time})]})]}),e.userId===D&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>{W(e),Z(e.comment)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu D\xfczenle",children:(0,a.jsx)("i",{className:"ri-edit-line text-xs"})}),(0,a.jsx)("button",{onClick:()=>eu(e.id,C),className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu Sil",children:(0,a.jsx)("i",{className:"ri-delete-bin-line text-xs"})})]})]}),(null==V?void 0:V.id)===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:X,onChange:e=>Z(e.target.value),maxLength:500,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:border-orange-500 text-sm",rows:3}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[X.length,"/500"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:ef,className:"px-3 py-1 text-gray-600 border border-gray-300 rounded-full hover:bg-gray-50 transition-colors cursor-pointer text-xs whitespace-nowrap",children:"İptal"}),(0,a.jsx)("button",{onClick:()=>eg(e.id,X,C),disabled:!X.trim()||X.trim()===e.comment,className:"px-3 py-1 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-xs whitespace-nowrap",children:"Kaydet"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed mb-2",children:e.comment}),(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((r,t)=>(0,a.jsx)("i",{className:"ri-star-".concat(t<e.rating?"fill":"line"," text-xs ").concat(t<e.rating?"text-yellow-400":"text-gray-300")},t))})]})]},e.id||r))})]}),null!==C&&0===ek(C).length&&(0,a.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("i",{className:"ri-chat-3-line text-3xl text-gray-300 mb-3"}),(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-500 mb-2",children:G?"Bu Satırda Hen\xfcz Yorum Yapmadınız":"Hen\xfcz Bu Satırda Yorum Yok"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:G?"Bu satır hakkında yorum yaparak başlayın!":"Bu satır hakkında ilk yorumu siz yapın!"})]})})]})})]})]})]})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=7280)),_N_E=e.O()}]);