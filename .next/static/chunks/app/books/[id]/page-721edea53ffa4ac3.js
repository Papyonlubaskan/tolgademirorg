(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{1522:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(5155),s=t(2115),i=t(2619),l=t.n(i),n=t(8743);function o(e){let{bookId:r}=e,[t,i]=(0,s.useState)(null),[o,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[p,b]=(0,s.useState)([]),[f,k]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!0),[w,N]=(0,s.useState)(null),[v,_]=(0,s.useState)(""),[L,S]=(0,s.useState)({}),[E,C]=(0,s.useState)({total:0,isLiked:!1}),[z,B]=(0,s.useState)({}),[Y,I]=(0,s.useState)(""),[T,K]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("user_id");e||(e="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("user_id",e)),I(e),P(),D()},[r]),(0,s.useEffect)(()=>{Y&&t&&q()},[Y,t]),(0,s.useEffect)(()=>{Y&&o.length>0&&R()},[Y,o]);let P=async()=>{try{m(!0),K(null),console.log("Loading book data for bookId:",r);let e=await fetch("/api/books",{headers:{}});if(!e.ok)throw console.error("Books API error:",e.status,e.statusText),Error("Kitap bilgileri y\xfcklenemedi");let t=await e.json();if(console.log("Books API response:",t),!t.success)throw Error(t.error||"Kitap bilgileri alınamadı");let a=(t.data||[]).find(e=>e.id.toString()===r.toString());if(a){i(a),console.log("Book found:",a.title);try{let e=await fetch("/api/chapters?bookId=".concat(a.id)),r=await e.json();if(r.success&&r.data){let e=r.data;d(e),console.log("Chapters loaded: ".concat(e.length," chapters")),await O(e)}else console.error("Chapters API error:",r.error),d([])}catch(e){console.error("Chapters loading error:",e),d([])}}else throw Error("Kitap bulunamadı")}catch(e){console.error("Error loading book data:",e),K(e instanceof Error?e.message:"Kitap y\xfcklenirken hata oluştu"),i({id:r,title:"Kitap Y\xfckleniyor...",description:"Kitap bilgileri y\xfcklenirken bir sorun oluştu. L\xfctfen sayfayı yenileyin.",cover_image_url:"https://readdy.ai/api/search-image?query=Book%20cover%20with%20elegant%20design%2C%20professional%20typography%2C%20warm%20colors%2C%20minimalist%20style&width=400&height=600&seq=fallback".concat(r,"&orientation=portrait"),author:"Tolga Demir",category:"Genel",views:0,publish_date:new Date().toISOString(),amazon_link:"",dr_link:"",idefix_link:"",status:"published"}),d([])}finally{m(!1)}},D=async()=>{try{j(!0);let r=await fetch("/api/books",{headers:{}});if(r.ok){let t=await r.json();if(t.success){var e;console.log("Kitap yorumları y\xfcklendi:",(null==(e=t.data)?void 0:e.length)||0),b(t.data||[])}else console.error("Yorumlar y\xfcklenirken hata:",t.error),b([])}else console.error("Comments API hatası:",r.status,r.statusText),b([])}catch(e){console.error("Yorumlar y\xfcklenirken hata:",e),b([])}finally{j(!1)}},O=async e=>{try{let r={};await Promise.allSettled(e.map(async e=>{try{let a=0;try{let e=await fetch("/api/books",{headers:{}});if(e.ok){let r=await e.json();if(r.success){var t;a+=(null==(t=r.data)?void 0:t.length)||0}}}catch(r){console.error("Chapter comments error for ".concat(e.id,":"),r)}try{let e=await fetch("/api/books",{headers:{}});if(e.ok){let r=await e.json();r.success&&(a+=r.total||0)}}catch(r){console.error("Line comments error for ".concat(e.id,":"),r)}r[e.id]=a}catch(t){console.error("Error loading comments for chapter ".concat(e.id,":"),t),r[e.id]=0}})),S(r)}catch(e){console.error("Error loading chapter comment counts:",e),S({})}},A=async()=>{if(h.trim()&&u.trim()){k(!0);try{let e=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:r,name:u.trim(),comment:h.trim(),rating:5,userId:localStorage.getItem("user_id")||"user_"+Date.now(),isChapterComment:!1})});if(e.ok){let r=await e.json();if(r.success)b(e=>[r.data,...e]),x(""),g(""),console.log("Kitap yorumu başarıyla eklendi ve kaydedildi!");else throw Error(r.error||"Yorum eklenirken hata oluştu")}else throw Error("API hatası: "+e.status)}catch(e){console.error("Yorum eklenirken hata:",e),alert("Yorum eklenirken hata oluştu: "+(e instanceof Error?e.message:String(e)))}finally{k(!1)}}},H=async(e,r)=>{if(r.trim())try{let t=await fetch("/api/books",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:r.trim()})});if(t.ok){let a=await t.json();if(a.success)b(t=>t.map(t=>t.id===e?{...t,comment:r.trim()}:t)),N(null),_("");else throw Error(a.error||"Yorum g\xfcncellenirken hata oluştu")}else throw Error("API hatası: "+t.status)}catch(e){console.error("Yorum g\xfcncellenirken hata:",e),alert("Yorum g\xfcncellenirken hata oluştu. L\xfctfen tekrar deneyin.")}},J=async e=>{if(window.confirm("Bu yorumu silmek istediğinizden emin misiniz?"))try{let r=await fetch("/api/books",{method:"DELETE",headers:{}});if(r.ok){let t=await r.json();if(t.success)b(r=>r.filter(r=>r.id!==e));else throw Error(t.error||"Yorum silinirken hata oluştu")}else throw Error("API hatası: "+r.status)}catch(e){console.error("Yorum silinirken hata:",e),alert("Yorum silinirken hata oluştu. L\xfctfen tekrar deneyin.")}},G=()=>{N(null),_("")},q=async()=>{try{let e=await fetch("/api/likes?bookId=".concat(r),{headers:{"Content-Type":"application/json"}});if(e.ok){let r=await e.json();r.success&&C({total:r.data.totalLikes||0,isLiked:r.data.isLiked||!1})}}catch(e){console.error("Error loading book likes:",e)}},R=async()=>{try{let e={};await Promise.all(o.map(async r=>{try{let t=await fetch("/api/likes?chapterId=".concat(r.id),{headers:{"Content-Type":"application/json"}});if(t.ok){let a=await t.json();a.success&&(e[r.id]={total:a.data.totalLikes||0,isLiked:a.data.isLiked||!1})}}catch(t){console.error("Error loading likes for chapter ".concat(r.id,":"),t),e[r.id]={total:0,isLiked:!1}}})),B(e)}catch(e){console.error("Error loading chapter likes:",e)}},F=async()=>{if(!Y)return;let e=E.isLiked,t=E.total;C({total:e?t-1:t+1,isLiked:!e});try{let t=await fetch("/api/likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:r,action:e?"unlike":"like"})});if(!t.ok)throw Error("Beğeni işlemi başarısız");let a=await t.json();if(!a.success)throw Error(a.error||"Beğeni işlemi başarısız");C({total:a.data.totalLikes||0,isLiked:a.data.isLiked||!1})}catch(r){console.error("Book like işlemi hatası:",r),C({total:t,isLiked:e}),alert("Beğeni işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}},M=async(e,r)=>{if(r.preventDefault(),r.stopPropagation(),!Y)return;let t=z[e]||{total:0,isLiked:!1},a=t.isLiked,s=t.total;B(r=>({...r,[e]:{total:a?s-1:s+1,isLiked:!a}}));try{let r=await fetch("/api/likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapterId:e,action:a?"unlike":"like"})});if(!r.ok)throw Error("Beğeni işlemi başarısız");let t=await r.json();if(!t.success)throw Error(t.error||"Beğeni işlemi başarısız");B(r=>({...r,[e]:{total:t.data.totalLikes||0,isLiked:t.data.isLiked||!1}}))}catch(r){console.error("Chapter like işlemi hatası:",r),B(r=>({...r,[e]:{total:s,isLiked:a}})),alert("Beğeni işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}};return c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 dark:border-orange-400 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Kitap y\xfckleniyor..."})]})}):t?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)("div",{className:"pt-20 pb-16",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(l(),{href:"/books",className:"inline-flex items-center text-orange-600 hover:text-orange-700 cursor-pointer",children:[(0,a.jsx)("i",{className:"ri-arrow-left-line mr-2"}),"Kitaplara Geri D\xf6n"]})}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-12 mb-16",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden sticky top-24",children:[(0,a.jsx)("img",{src:t.cover_image_url||t.cover_image,alt:t.title,className:"w-full h-96 object-cover object-top"}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("published"===t.status?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:"published"===t.status?"Yayında":"Taslak"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-3",children:t.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-book-line mr-1"}),o.length," B\xf6l\xfcm"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-calendar-line mr-1"}),(0,a.jsx)("span",{suppressHydrationWarning:!0,children:t.publish_date?new Date(t.publish_date).toLocaleDateString("tr-TR"):"Tarih yok"})]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-chat-3-line mr-1"}),y?"...":p.length," Yorum"]})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("button",{onClick:F,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 rounded-full font-semibold transition-all duration-200 ".concat(E.isLiked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600"),children:[(0,a.jsx)("i",{className:"".concat(E.isLiked?"ri-heart-fill":"ri-heart-line")}),(0,a.jsx)("span",{children:E.isLiked?"Beğenildi":"Beğen"}),(0,a.jsx)("span",{className:"bg-white px-2 py-1 rounded-full text-xs font-bold",children:E.total})]})}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:t.description}),t.content&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Kitap Hakkında"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:t.content})]}),(t.amazon_link||t.dr_link||t.idefix_link)&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Satın Al"}),(0,a.jsxs)("div",{className:"space-y-2",children:[t.amazon_link&&(0,a.jsxs)("a",{href:t.amazon_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full bg-yellow-500 text-white py-2 px-4 rounded-lg hover:bg-yellow-600 transition-colors cursor-pointer whitespace-nowrap",children:[(0,a.jsx)("i",{className:"ri-amazon-line mr-2"}),"Amazon"]}),t.dr_link&&(0,a.jsxs)("a",{href:t.dr_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap",children:[(0,a.jsx)("i",{className:"ri-book-line mr-2"}),"D&R"]}),t.idefix_link&&(0,a.jsxs)("a",{href:t.idefix_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap",children:[(0,a.jsx)("i",{className:"ri-book-line mr-2"}),"İdefix"]})]})]})]})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"B\xf6l\xfcmler"}),o&&o.length>=5&&(0,a.jsxs)("select",{onChange:e=>{let r=o.find(r=>r.id.toString()===e.target.value);r&&(window.location.href="/kitaplar/".concat(t.slug||t.id,"/bolum/").concat(r.slug||r.id))},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-orange-500 focus:border-transparent cursor-pointer",defaultValue:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Hızlı Erişim"}),o&&o.map((e,r)=>(0,a.jsxs)("option",{value:e.id,children:[(null==e?void 0:e.chapter_number)||(null==e?void 0:e.order_number)||r+1,". ",(null==e?void 0:e.title)||"B\xf6l\xfcm "+(r+1)]},e.id))]})]}),o&&o.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[o&&o.slice(0,10).map(e=>{var t,s,i,n;return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 mr-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:(null==e?void 0:e.title)||"Başlıksız B\xf6l\xfcm"}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-3",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-file-text-line mr-1"}),"B\xf6l\xfcm ",(null==e?void 0:e.chapter_number)||(null==e?void 0:e.order_number)||"?"]}),e.content&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-character-recognition-line mr-1"}),(null==e||null==(t=e.content)?void 0:t.length)||0," karakter"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-chat-3-line mr-1"}),e&&e.id&&L[e.id]||0," Yorum"]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("button",{onClick:r=>e&&e.id&&M(e.id,r),className:"flex items-center space-x-1 px-3 py-2 rounded-full transition-all duration-200 ".concat(e&&e.id&&(null==(s=z[e.id])?void 0:s.isLiked)?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600"),children:[(0,a.jsx)("i",{className:"".concat(e&&e.id&&(null==(i=z[e.id])?void 0:i.isLiked)?"ri-heart-fill":"ri-heart-line"," text-sm")}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e&&e.id&&(null==(n=z[e.id])?void 0:n.total)||0})]})})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(l(),{href:"/kitaplar/".concat(r,"/bolum/").concat((null==e?void 0:e.slug)||(null==e?void 0:e.id)),className:"bg-orange-600 text-white px-6 py-3 rounded-full font-semibold hover:bg-orange-700 transition-colors cursor-pointer whitespace-nowrap",children:"Oku"})})]})})},e.id)}),o&&o.length>10&&(0,a.jsxs)("details",{className:"mt-4",children:[(0,a.jsxs)("summary",{className:"cursor-pointer px-4 py-3 bg-gradient-to-r from-orange-50 to-pink-50 dark:from-orange-900/20 dark:to-pink-900/20 rounded-lg text-orange-600 dark:text-orange-400 font-medium hover:from-orange-100 hover:to-pink-100 dark:hover:from-orange-900/30 dark:hover:to-pink-900/30 transition-colors text-center",children:[(0,a.jsx)("i",{className:"ri-arrow-down-s-line mr-2"}),o.length-10," B\xf6l\xfcm Daha G\xf6ster"]}),(0,a.jsx)("div",{className:"space-y-4 mt-4",children:o.slice(10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-full flex items-center justify-center text-sm font-semibold",children:(null==e?void 0:e.order_number)||(null==e?void 0:e.chapter_number)||t+11}),(0,a.jsx)("div",{children:(0,a.jsx)("h4",{className:"font-medium text-gray-800 dark:text-white",children:(null==e?void 0:e.title)||"Başlıksız B\xf6l\xfcm"})})]}),(0,a.jsxs)(l(),{href:"/kitaplar/".concat(r,"/bolum/").concat((null==e?void 0:e.slug)||(null==e?void 0:e.id)),className:"inline-flex items-center px-3 py-1 bg-orange-500 hover:bg-orange-600 text-white text-sm rounded-lg transition-colors",children:[(0,a.jsx)("span",{children:"Oku"}),(0,a.jsx)("i",{className:"ri-arrow-right-s-line ml-1"})]})]},e.id))})]})]}):(0,a.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-md",children:[(0,a.jsx)("i",{className:"ri-file-text-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-500 mb-2",children:"Hen\xfcz B\xf6l\xfcm Yok"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Bu kitaba hen\xfcz b\xf6l\xfcm eklenmemiş."})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:["Kitap Hakkında Yorumlar (",y?"...":p.length,")"]}),(0,a.jsxs)("div",{className:"bg-orange-50 rounded-xl p-6 mb-8",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Yorumunuzu Paylaşın"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"İsminiz",value:u,onChange:e=>g(e.target.value),className:"w-full p-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:border-orange-500 text-sm",disabled:f}),(0,a.jsx)("textarea",{placeholder:"Bu kitap hakkında d\xfcş\xfcncelerinizi paylaşın...",value:h,onChange:e=>x(e.target.value),maxLength:500,className:"w-full h-32 p-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-700 dark:text-white rounded-lg resize-none focus:outline-none focus:border-orange-500 text-sm",disabled:f}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[h.length,"/500"]}),(0,a.jsx)("button",{onClick:A,disabled:!h.trim()||!u.trim()||f,className:"px-6 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap flex items-center",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Kaydediliyor..."]}):"Yorum Yap"})]})]})]}),y?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Yorumlar y\xfckleniyor..."})]}):(0,a.jsx)("div",{className:"space-y-6",children:p.map((e,r)=>(0,a.jsx)("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-6 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-orange-600 font-semibold text-lg",children:e.name[0]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-white",children:e.name}),(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((r,t)=>(0,a.jsx)("i",{className:"ri-star-".concat(t<e.rating?"fill":"line"," text-sm ").concat(t<e.rating?"text-yellow-400":"text-gray-300")},t))}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.time})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{N(e),_(e.comment)},className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu D\xfczenle",children:(0,a.jsx)("i",{className:"ri-edit-line text-sm"})}),(0,a.jsx)("button",{onClick:()=>J(e.id),className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 cursor-pointer",title:"Yorumu Sil",children:(0,a.jsx)("i",{className:"ri-delete-bin-line text-sm"})})]})]}),(null==w?void 0:w.id)===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:v,onChange:e=>_(e.target.value),maxLength:500,className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:border-orange-500 text-sm",rows:3}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[v.length,"/500"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:G,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-full hover:bg-gray-50 transition-colors cursor-pointer text-sm whitespace-nowrap",children:"İptal"}),(0,a.jsx)("button",{onClick:()=>H(e.id,v),disabled:!v.trim()||v.trim()===e.comment,className:"px-4 py-2 bg-orange-600 text-white rounded-full hover:bg-orange-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed text-sm whitespace-nowrap",children:"Kaydet"})]})]})]}):(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:e.comment})]})]})},e.id||r))}),!y&&0===p.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("i",{className:"ri-chat-3-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-500 mb-2",children:"Hen\xfcz Yorum Yok"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Bu kitap hakkında ilk yorumu siz yapın!"})]})]})]})]})]})}),(0,a.jsx)(n.default,{})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Kitap bulunamadı"}),(0,a.jsx)(l(),{href:"/books",className:"text-orange-600 dark:text-orange-400 hover:underline",children:"Kitaplar sayfasına d\xf6n"})]})})}},8635:(e,r,t)=>{Promise.resolve().then(t.bind(t,1522))}},e=>{e.O(0,[2619,8743,8441,1255,7358],()=>e(e.s=8635)),_N_E=e.O()}]);