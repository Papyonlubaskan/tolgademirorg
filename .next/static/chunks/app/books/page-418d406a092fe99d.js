(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3495],{5052:(e,a,t)=>{Promise.resolve().then(t.bind(t,9079))},9079:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var r=t(5155),s=t(2115),i=t(2619),l=t.n(i),n=t(8743);function o(){let[e,a]=(0,s.useState)([]),[t,i]=(0,s.useState)(!0),[o,c]=(0,s.useState)({}),[d,x]=(0,s.useState)({}),[m,h]=(0,s.useState)({}),[g,u]=(0,s.useState)("");(0,s.useEffect)(()=>{p();let e=setInterval(p,3e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{e.length>0&&y()},[e]);let p=async()=>{try{i(!0);let e=await fetch("/api/books?limit=100");if(e.ok){let t=await e.json();if(t.success&&t.data){let e=t.data;a(e),await b(e)}else a([])}else a([])}catch(e){console.error("Kitaplar y\xfcklenirken hata:",e),a([])}finally{i(!1)}},b=async e=>{try{let a={};await Promise.all(e.map(async e=>{try{let r=await fetch("/api/books",{headers:{}});if(r.ok){let s=await r.json();if(s.success){var t;a[e.id]=(null==(t=s.data)?void 0:t.length)||0}}}catch(t){console.error("Error loading comments for book ".concat(e.id,":"),t),a[e.id]=0}})),c(a)}catch(e){console.error("Error loading comment counts:",e)}},y=async()=>{try{let a={},t={};await Promise.all(e.map(async e=>{try{let r=await fetch("/api/likes?type=book&targetId=".concat(e.id));if(r.ok){let s=await r.json();s.success&&(a[e.id]=s.data.totalLikes||0,t[e.id]=s.data.isLiked||!1)}}catch(r){console.error("Error loading likes for book ".concat(e.id,":"),r),a[e.id]=0,t[e.id]=!1}})),x(a),h(t)}catch(e){console.error("Error loading likes:",e)}},f=async(e,a)=>{if(a.preventDefault(),a.stopPropagation(),!g)return;let t=m[e],r=d[e]||0;h(a=>({...a,[e]:!t})),x(a=>({...a,[e]:t?r-1:r+1}));try{let a=t?void 0:JSON.stringify({type:"book",targetId:e,userId:g}),r=await fetch("/api/books",{method:t?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:a});if(!r.ok)throw Error("Beğeni işlemi başarısız");let s=await r.json();if(!s.success)throw Error(s.error||"Beğeni işlemi başarısız");await y()}catch(a){console.error("Like işlemi hatası:",a),h(a=>({...a,[e]:t})),x(a=>({...a,[e]:r})),alert("Beğeni işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}};return t?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800",children:[(0,r.jsx)("div",{className:"pt-20 pb-16",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 dark:border-orange-400 border-t-transparent rounded-full mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Kitaplar y\xfckleniyor..."})]})})}),(0,r.jsx)(n.default,{})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-amber-50 dark:from-gray-900 dark:to-gray-800",children:[(0,r.jsx)("div",{className:"pt-20 pb-16",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"Kitaplarım"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Kaleme aldığım hikayeler, duygular ve hayallerin birleştiği \xf6zel koleksiyonum. Her kitap, farklı bir d\xfcnyaya a\xe7ılan kapı."})]}),e.length>0?(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>(0,r.jsx)(l(),{href:"/kitaplar/".concat(e.id),children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer group",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e.cover_image_url||e.cover_image,alt:e.title,className:"w-full h-80 object-cover object-top group-hover:scale-105 transition-transform duration-300"}),(0,r.jsx)("div",{className:"absolute top-4 left-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:"published"===e.status?"Yayında":"Taslak"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-3 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed mb-4 line-clamp-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-calendar-line mr-1"}),(0,r.jsx)("span",{suppressHydrationWarning:!0,children:e.publish_date?new Date(e.publish_date).toLocaleDateString("tr-TR"):"Tarih yok"})]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-chat-3-line mr-1"}),o[e.id]||0," Yorum"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.author&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,r.jsx)("i",{className:"ri-user-line mr-1"}),e.author]}),e.category&&(0,r.jsx)("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full",children:e.category})]}),(0,r.jsxs)("button",{onClick:a=>f(e.id,a),className:"flex items-center space-x-1 px-3 py-2 rounded-full transition-all duration-200 ".concat(m[e.id]?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600"),children:[(0,r.jsx)("i",{className:"".concat(m[e.id]?"ri-heart-fill":"ri-heart-line"," text-sm")}),(0,r.jsx)("span",{className:"text-xs font-medium",children:d[e.id]||0})]})]})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("i",{className:"ri-book-line text-6xl text-gray-300 mb-6"}),(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-500 mb-4",children:"Hen\xfcz Kitap Yok"}),(0,r.jsx)("p",{className:"text-gray-400 max-w-md mx-auto",children:"Yakında burada muhteşem hikayeler yer alacak. İlk kitabımız i\xe7in bizi takip etmeye devam edin!"})]})]})}),(0,r.jsx)(n.default,{})]})}}},e=>{e.O(0,[2619,8743,8441,1255,7358],()=>e(e.s=5052)),_N_E=e.O()}]);